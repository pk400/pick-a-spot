{% extends 'base.html' %}
{% load i18n %}
{% load staticfiles %}
{% block title %}{{ title }}
{% endblock %}
{% block stylesheets %}
<link rel="stylesheet" type="text/css" href="{% static 'css/map.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/preferences.css' %}"> 
<link rel="stylesheet" type="text/css" href="{% static 'css/chat.css' %}">
{% endblock %}
{% block content %}
{% csrf_token %}
<label style="display: none;" id="preferences-obj">{% if user.is_authenticated and preferences %}{ "user" : "{{ user }}", "preferences" : {{ preferences }} }{% endif %}</label>
<label style="display: none;" id="lonlat-obj">[ {{ lon }}, {{lat}} ]</label>
<div>
<!-- OPTIONS -->
<div class="row optionschoice">
    {% if user.is_authenticated %}
    <div id="pickoption" class="col-xs-5 map-option">
        <h1>Pick-A-Spot</h1>
        <ul class="row ">
            <li><small>Lorem ipsum dolor sit amet, consectetur adipiscing elit</small></li>
            <li><small>veniam quis nostrud exercitation ullamco</small></li>
            <li><small>aboris nisi ut aliquip ex ea commodo consequat</small></li>
        </ul>
    </div>
    {% endif %}
    <div id="quickoption" class="col-xs-5 map-option">
        <h1>Quick-Pick</h1>
        <ul  class="row">
            <li><small>Lorem ipsum dolor sit amet, consectetur adipiscing elit</small></li>
            <li><small>veniam quis nostrud exercitation ullamco</small></li>
            <li><small>aboris nisi ut aliquip ex ea commodo consequat</small></li>
        </ul>
    </div>
</div>
<div style="display: none;" class="map-container">
    <i data-toggle="modal" data-target="#location-modal" id="set-location" title="Set Your Own Location" class="fa fa-compass fa-2x"></i>
    <i data-toggle="modal" data-target="#share-modal" id="share-link" title="Share This Room" class="fa fa-link fa-2x"></i>
    <div class="row">
        <!-- ADDRESS MODAL -->
        <div style="display: none;" class="modal fade" id="location-modal" tabindex="-1" role="dialog" aria-labelledby="location-modallabel">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="location-modallabel">Set Location</h4>
              </div>
              <div class="modal-body">
                <button id="share-location-btn" type="button" class="btn btn-default" data-dismiss="modal">Share Current Location</button>
                <div class="form-group">
                    <label for="usr">Address or Postal/Zip Code:</label>
                    <input type="text" class="form-control" id="locate-address-input">              
                    <button id="locate-address-btn" type="button" class="btn btn-default" data-dismiss="modal">Locate Address</button>
                </div>
              </div>
              <div class="modal-footer">
                <button id="reset-location-btn" type="button" class="btn btn-primary" data-dismiss="modal">Reset Location</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
        <!-- SHARE MODAL -->
        <div style="display: none;" class="modal fade" id="share-modal" tabindex="-1" role="dialog" aria-labelledby="share-modallabel">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="share-modallabel">Share</h4>
              </div>
              <div class="modal-body">
                <h5>Give this URL to the people you want to invite (valid for 24 hours after creation): </h5>
                <input type="text" class="form-control" id="share-link-url" readonly>
                <i href="mailto:?subject=Pick%20A%20Spot&amp;body=Pick%20A%20Spot%20To%20Eat%20With%20Me%20"id="email-link" title="Share This Room With Friends" class="fa fa-envelope-o fa-2x"> Email To Others</i>
                <script>
                    document.getElementById("share-link-url").value = window.location.href;
                    document.getElementById("email-link").setAttribute("href", document.getElementById("email-link").getAttribute("href") + window.location.href)
                </script>                
                {% if user.is_authenticated %}
                <i id="email-link-auth" title="Share This Room With Friends" class="fa fa-envelope-o fa-2x"> Share This Room With PickASpot Friends</i>
                <table id="friend-list-share" style="display: none;" class="table table-striped">
                    <thead>
                      <tr>
                        <th>Friends</th>
                        <th>Send Email?</th>
                      </tr>
                    </thead>
                    <tbody>
                    {% for x in friends %}
                        {% if x.user2 != user %}
                        <tr>
                            <td class="friend-name">{{ x.user2 }}</td>
                            <td><div class="checkbox"><label><input class="checkbox-friends" type="checkbox" value="{{ x.user2 }}"></label></div></td>      
                        </tr>
                        {% endif %} 
                    {% endfor %}                      
                    </tbody>
                </table>
                {% endif %}  
              </div>
              <div class="modal-footer">
                {% if user.is_authenticated %}
                <button style="display: none;" id="send-email-btn" type="button" class="btn btn-primary" data-dismiss="modal">Send Email</button>
                {% endif %}                  
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>        
	    <!-- MAP -->
        <div class="col-md-8 no-padding">
            <div id="map" style="height:500px;"></div>
        </div>
        <!-- RESULTS -->
        <div class="col-md-4 no-padding">
            <div class="panel panel-primary panel-results">
                <div class="panel-heading">
                    <h3 class="panel-title"><b>Results</b></h3>
                </div>
                <div id="panel-results-box" class="panel-body" style="height: 414px; }">
                	<table id="table-results" class="table table-striped">
                		<tbody id="table-body-results">

                		</tbody>
                	</table>
                </div>           
            </div>
    		<button id="btn-ready-pick" type="button" class="btn btn-info">Ready!</button>     
        </div>
    </div>
    <div class="row">
        <!-- CHAT -->
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <span class="glyphicon glyphicon-comment"></span> Chat
                    <div class="btn-group pull-right">
                    </div>
                </div>
                <div class="panel-body">
                    <ul id="chat-list" class="chat">
                    </ul>
                </div>
                <div class="panel-footer">
                    <div class="input-group">
                        <input id="comment-box" type="text" class="form-control input-sm" placeholder="Type your message here..." />
                        <span class="input-group-btn">
                            <button class="btn btn-warning btn-sm" id="btn-chat">Send</button>
                        </span>
                    </div>
                </div>
            </div>
    </div>
</div>
<!-- PREFERENCES -->
<div style="display: none;" class="container preferences-container">
    <div class=" form-group">
        <div class="row">
            <div class="col-xs-12">
                <br> Price:
                <br>
                <div class="btn-group btn-group-vertical" data-toggle="buttons">
                    <label class="btn">
                    <input type="radio" name='pricerad' value="low"><i class="fa fa-circle-o fa-2x"></i><i class="fa fa-check-circle-o fa-2x"></i> <span>  Low</span>
                    </label>
                    <label class="btn">
                    <input type="radio" name='pricerad' value="high"><i class="fa fa-circle-o fa-2x"></i><i class="fa fa-check-circle-o fa-2x"></i><span> High</span>
                    </label>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12">
                <br> Distance:
                <br>
                <div class="btn-group btn-group-vertical" data-toggle="buttons">
                    <label class="btn">
                    <input type="radio" name='distance' value="walking"><i class="fa fa-circle-o fa-2x"></i><i class="fa fa-check-circle-o fa-2x"></i> <span>  Walking</span>
                    </label>
                    <label class="btn">
                    <input type="radio" name='distance' value="driving"><i class="fa fa-circle-o fa-2x"></i><i class="fa fa-check-circle-o fa-2x"></i><span> Driving</span>
                    </label>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12">
                <hr>
                Types of Cuisine:
                <br>
                <div class="form-inline">
                    <div class="icon-addon addon-lg form-group">
                        <input id="search-add" type="text" placeholder="Example: Steak, Donut, etc" class="form-control">
                        <i class="fa fa-cutlery fa-2x"></i>
                    </div>
                    <button id="btn-add" class="btn btn-default" type="button">Add Choice</button>     
                </div>
                <div id="default-food-options" class="btn-group btn-group-vertical col-xs-6" data-toggle="buttons">
                    <hr>
                    Cuisine Examples:
                    <label class="btn">
                    <input type="checkbox" name='caribbeanfood'><i class="fa fa-square-o fa-2x"></i><i class="fa fa-check-square-o fa-2x"></i><span> Caribbean Food</span>
                    </label>
                    <label class="btn">
                    <input type="checkbox" name='chinesefood'><i class="fa fa-square-o fa-2x"></i><i class="fa fa-check-square-o fa-2x"></i><span> Chinese Food</span>
                    </label>
                    <label class="btn">
                    <input type="checkbox" name='frenchfood'><i class="fa fa-square-o fa-2x"></i><i class="fa fa-check-square-o fa-2x"></i><span> French Food</span>
                    </label>
                    <label class="btn">
                    <input type="checkbox" name='greekfood'><i class="fa fa-square-o fa-2x"></i><i class="fa fa-check-square-o fa-2x"></i><span> Greek Food</span>
                    </label>
                    <label class="btn">
                    <input type="checkbox" name='indianfood'><i class="fa fa-square-o fa-2x"></i><i class="fa fa-check-square-o fa-2x"></i><span> Indian Food</span>
                    </label>
                    <label class="btn">
                    <input type="checkbox" name='italianfood'><i class="fa fa-square-o fa-2x"></i><i class="fa fa-check-square-o fa-2x"></i><span> Italian Food</span>
                    </label>
                    <label class="btn">
                    <input type="checkbox" name='japanesefood'><i class="fa fa-square-o fa-2x"></i><i class="fa fa-check-square-o fa-2x"></i><span> Japanese Food</span>
                    </label>
                    <label class="btn">
                    <input type="checkbox" name='koreanfood'><i class="fa fa-square-o fa-2x"></i><i class="fa fa-check-square-o fa-2x"></i><span> Korean Food</span>
                    </label>
                    <label class="btn">
                    <input type="checkbox" name='middleeasternfood'><i class="fa fa-square-o fa-2x"></i><i class="fa fa-check-square-o fa-2x"></i><span> Middle Eastern Food</span>
                    </label>
                    <label class="btn">
                    <input type="checkbox" name='spanishfood'><i class="fa fa-square-o fa-2x"></i><i class="fa fa-check-square-o fa-2x"></i><span> Spanish Eastern Food</span>
                    </label>
                    <label class="btn">
                    <input type="checkbox" name='thaifood'><i class="fa fa-square-o fa-2x"></i><i class="fa fa-check-square-o fa-2x"></i><span> Thai Food</span>
                    </label>
                    <label class="btn">
                    <input type="checkbox" name='vietnamesefood'><i class="fa fa-square-o fa-2x"></i><i class="fa fa-check-square-o fa-2x"></i><span> Vietnamese Food</span>
                    </label>           
                </div>
                <div id="user-food-options" class="btn-group btn-group-vertical col-xs-6" data-toggle="buttons">
                    <hr>
                    User Choices:    
                </div>
                <div class="col-xs-12">
                    <button id="btn-preferences" class="btn btn-default" type="button">Ready</button>   
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block custom-scripts %}
<script src="{% static 'scripts/map.js' %}"></script>
{{ mapapi|safe }}
<script src="{% static 'scripts/friendlist.js' %}"></script>
<script src="{% static 'scripts/chat.js' %}"></script>
<script src="{% static 'scripts/choices.js' %}"></script>
<script src="{% static 'scripts/preferences.js' %}"></script>
{% endblock %}